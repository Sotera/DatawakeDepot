<div style="padding-bottom: 5px">
    <!-- Team Select-->
    <div class="btn-group">
        <button type="button" data-toggle="dropdown" class="btn btn-primary btn-sm dropdown-toggle">Team:
            {{selectedTeam.name}}
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" id="team_select">
            <li ng-repeat="team in teams" ng-click="teamChanged(team)" class="pointer"
                ng-class="{selected : team === selectedTeam}">
                {{team.name}}
            </li>
        </ul>
    </div>
    <!-- Domain Select-->
    <div class="btn-group">
        <button ng-disabled="!selectedTeam" type="button" data-toggle="dropdown"
                class="btn btn-primary btn-sm dropdown-toggle">Domain:
            {{selectedDomain.name}}
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" id="domain_select">
            <li ng-repeat="domain in domains" ng-click="domainChanged(domain)" class="pointer"
                ng-class="{selected : domain === selectedDomain}">
                {{domain.name}}
            </li>
        </ul>
    </div>
    <!--Trail Selection Button-->
    <div class="btn-group">
        <button ng-disabled="!selectedTeam || !selectedDomain" type="button" data-toggle="dropdown"
                class="btn btn-primary btn-sm dropdown-toggle">Trail:
            {{selectedTrail.name}}
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" id="trail_select">
            <li ng-repeat="trail in trails" ng-click="trailChanged(trail)" class="pointer"
                ng-class="{selected : trail === selectedTrail}">
                {{trail.name}}
            </li>
        </ul>
    </div>
    <!-- Views selection -->
    <div class="btn-group">
        <div
                isteven-multi-select
                input-model="views"
                output-model="selectedViews"
                button-label="'Select Entity Types:' name"
                item-label="name"
                tick-property="selected"
                max-labels="3"
        >
        </div>
    </div>
    <!-- Draw Graph -->
    <div class="btn-group">
        <button ng-disabled="!selectedTeam || !selectedDomain || !selectedTrail"
                class="btn btn-success btn-sm" ng-click="drawGraph()">
            <span class="glyphicon glyphicon-edit"></span> Draw Graph
        </button>
    </div>
</div>
<div class="box">
    <div class="box-body no-padding" style="min-height: 120px;">

        <div class="row"></div>
        <tabset class="nav-tabs-custom">
            <tab heading="Graph" select="drawGraph()">
                <div class="row">
                    <div class="col-sm-10">
                        <div id="link-dialog" title="Vertex Details"></div>
                        <div id=node_graph></div>
                        <div id="dialog" title="Highlighted Vertices"></div>
                    </div>
                    <div class="col-sm-2">
                        <svg id=legend height=600px style="position:relative; float: right; pointer-events:none;"></svg>
                    </div>

                </div>
            </tab>
            <tab heading="Visited Links">
                <table class="table table-bordered table-striped">
                    <thead>
                    <tr>
                        <td>
                            <a href="#" ng-click="sortType = 'searchTerms'; sortReverse = !sortReverse">
                                Search Terms
                                <span ng-show="sortType == 'searchTerms' && !sortReverse"
                                      class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'searchTerms' && sortReverse" class="fa fa-caret-up"></span>
                            </a></td>
                        <td>
                            <a href="#" ng-click="sortType = 'name'; sortReverse = !sortReverse">
                                URL
                                <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
                            </a>
                        </td>
                        <td>
                            <a href="#" ng-click="sortType = 'ts'; sortReverse = !sortReverse">
                                Timestamp
                                <span ng-show="sortType == 'ts' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'ts' && sortReverse" class="fa fa-caret-up"></span>
                            </a>
                        </td>
                    </tr>
                    </thead>

                    <tbody>
                    <tr ng-repeat="page in visitedGrid | orderBy:sortType:sortReverse ">
                        <td>{{ page.searchTerms}}</td>
                        <td><a href="{{page.url}}" target="_blank">{{ page.url.substring(0,100) }}</a></td>
                        <td>{{ page.timestamp }}</td>
                        <td>{{ page.dwDomainEntityTypeId }}</td>
                    </tr>
                    </tbody>
                </table>
            </tab>
            <tab heading="Entities">
                <div class="alert alert-info">
                    <p>Sort Type: {{ sortType }}</p>
                    <p>Sort Reverse: {{ sortReverse }}</p>
                    <p>Search Query: {{ searchFish }}</p>
                </div>
                <table st-table="entitiesGridSafe" st-safe-src="entitiesGrid" class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th st-sort="text">Name</th>
                            <th st-sort="type">Type</th>
                            <th st-sort="url">URL</th>
                            <th st-sort="weight">Count</th>
                            <th st-sort="extractor">Extractor</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="entity in entitiesGridSafe">
                            <td>{{ entity.text }}</td>
                            <td><span class="span label label-ltgray" ng-repeat="type in entity.type">{{type}}</span></td>
                            <td><span class="span label" ng-repeat="url in entity.urls"><a href="{{url}}" target="_blank">{{
                                url.substring(0,100) }}</a></span></td>
                            <td>{{ entity.weight }}</td>
                            <td>{{ entity.extractor }}</td>
                        </tr>
                    </tbody>
                </table>
            </tab>
            <tab heading="Word Cloud" select="drawGraph()">
                <div class="row">
                    <jqcloud words="words" width="500" height="500" steps="7"></jqcloud>
                </div>

            </tab>
        </tabset>
    </div>
</div>
